<!DOCTYPE html>
<html lang="en">
  <head>
    <title>RequestInterceptor Protocol Reference</title>
    <link rel="stylesheet" type="text/css" href="../css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="../css/highlight.css" />
    <meta charset='utf-8'>
    <script src="../js/jquery.min.js" defer></script>
    <script src="../js/jazzy.js" defer></script>
    
  </head>
  <body>
    <a name="//apple_ref/swift/Protocol/RequestInterceptor" class="dashAnchor"></a>
    <a title="RequestInterceptor Protocol Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="../index.html">Swifty Docs</a> (92% documented)</p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="../index.html">Swifty Reference</a>
        <img id="carat" src="../img/carat.png" />
        RequestInterceptor Protocol Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="../Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Classes/BaseResource.html">BaseResource</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/Constraint.html">Constraint</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/NetworkResource.html">NetworkResource</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/NetworkResourceWithBody.html">NetworkResourceWithBody</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/NetworkResponse.html">NetworkResponse</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/Swifty.html">Swifty</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/SwiftyError.html">SwiftyError</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/SwiftyInspector.html">SwiftyInspector</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/WebServiceError.html">WebServiceError</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="../Enums.html">Enums</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Enums/SwiftyErrorCodes.html">SwiftyErrorCodes</a>
              </li>
              <li class="nav-group-task">
                <a href="../Enums/URLSessionTaskPriority.html">URLSessionTaskPriority</a>
              </li>
              <li class="nav-group-task">
                <a href="../Enums/WebServiceErrorCodes.html">WebServiceErrorCodes</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="../Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Protocols/RequestInterceptor.html">RequestInterceptor</a>
              </li>
              <li class="nav-group-task">
                <a href="../Protocols/ResponseInterceptor.html">ResponseInterceptor</a>
              </li>
              <li class="nav-group-task">
                <a href="../Protocols/ResponseParser.html">ResponseParser</a>
              </li>
              <li class="nav-group-task">
                <a href="../Protocols/WebService.html">WebService</a>
              </li>
              <li class="nav-group-task">
                <a href="../Protocols/WebServiceNetworkInterface.html">WebServiceNetworkInterface</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="../Typealiases.html">Typealiases</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Typealiases.html#/s:6Swifty18SwiftyFailureBlock">SwiftyFailureBlock</a>
              </li>
              <li class="nav-group-task">
                <a href="../Typealiases.html#/s:6Swifty18SwiftySuccessBlock">SwiftySuccessBlock</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            <h1>RequestInterceptor</h1>
              <div class="declaration">
                <div class="language">
                  <pre class="highlight"><code><span class="kd">public</span> <span class="kd">protocol</span> <span class="kt">RequestInterceptor</span></code></pre>

                </div>
              </div>
            <p>Request Interceptors are called just before a request is about to fire over the network. Request Interceptors are called <strong>after</strong> all the constraints of a request a satisfied, but just <strong>before</strong> a request is about to go over the network. This makes them especially useful to add parameters to the requests they need to succeed.</p>

<p>Your interceptors are always called <strong>in the order</strong> they are passed into the Swifty Initializer. Also, each interceptor&rsquo;s result is then sent into the next one, that is, the interceptors are <strong>executed serially</strong>.</p>

<blockquote>
<p>You should not do too much work synchronously in your request interceptors, since your requests have to wait for the interceptors before firing over the network. If you need to do long running tasks before requests, try using a <code><a href="../Classes/Constraint.html">Constraint</a></code> instead.</p>
</blockquote>

<p>To create a <code>RequestInterceptor</code>, simply create a class/struct that conforms to the <code>RequestInterceptor</code> protocol, and implement the one required method: <code>intercept(resource: NetworkResource)</code></p>

          </section>
          <section class="section task-group-section">
            <div class="task-group">
              <ul>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:FP6Swifty18RequestInterceptor9interceptFT8resourceCS_15NetworkResource_S1_"></a>
                    <a name="//apple_ref/swift/Method/intercept(resource:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:FP6Swifty18RequestInterceptor9interceptFT8resourceCS_15NetworkResource_S1_">intercept(resource:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>This method gives you the chance to modify the network resource just before it fires over the network.</p>

<p>You can use all the same modifiers here like <code>.header()</code> or <code>.query()</code> as you can use in the WebService.</p>

<p><strong>Special Case:</strong></p>

<ul>
<li>If you want to modify the body of the network resource here, you need to cast the given resource into a NetworkResourceWithBody first before you use those method:</li>
</ul>
<pre class="highlight swift"><code><span class="kd">class</span> <span class="kt">BodyModifyingInterceptor</span><span class="p">:</span> <span class="kt">RequestInterceptor</span> <span class="p">{</span>

<span class="kd">func</span> <span class="nf">intercept</span><span class="p">(</span><span class="nv">resource</span><span class="p">:</span> <span class="kt">NetworkResource</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">NetworkResource</span> <span class="p">{</span>

    <span class="c1">// Cast the NetworkResource into the more specialized type NetworkResourceWithBody</span>
    <span class="k">if</span> <span class="k">let</span> <span class="nv">resource</span> <span class="o">=</span> <span class="n">resource</span> <span class="k">as?</span> <span class="kt">NetworkResourceWithBody</span> <span class="p">{</span>
       <span class="c1">// You can use the body encoding methods here like `.json()` or `.data()`</span>
    <span class="p">}</span>

   <span class="k">return</span> <span class="n">resource</span>
<span class="p">}</span>
</code></pre>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">func</span> <span class="nf">intercept</span><span class="p">(</span><span class="nv">resource</span><span class="p">:</span> <span class="kt"><a href="../Classes/NetworkResource.html">NetworkResource</a></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt"><a href="../Classes/NetworkResource.html">NetworkResource</a></span></code></pre>

                        </div>
                      </div>
                      <div>
                        <h4>Parameters</h4>
                        <table class="graybox">
                          <tbody>
                            <tr>
                              <td>
                                <code>
                                <em>resource</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>NetworkResource</p>
                                </div>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                      <div>
                        <h4>Return Value</h4>
                        <p>NetworkResource</p>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
          </section>
        </section>
        <section id="footer">
          <p>&copy; 2017 <a class="link" href="https://github.com/Flipkart/Swifty" target="_blank" rel="external">Siddharth Gupta</a>. All rights reserved. (Last updated: 2017-09-11)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.8.3</a>, a <a class="link" href="http://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
